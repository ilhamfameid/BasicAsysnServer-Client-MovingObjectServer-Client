<Window x:Class="ChatClient.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Chat Client" Height="500" Width="900">
    <Grid Margin="10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- User List -->
        <StackPanel Grid.Column="0">
            <TextBlock Text="Online Users" FontWeight="Bold" Margin="0,0,0,5"/>
            <ListBox x:Name="UserList" Height="400"/>
        </StackPanel>

        <!-- Chat Area -->
        <Grid Grid.Column="1" Margin="10,0,0,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <StackPanel Orientation="Horizontal" Grid.Row="0" Margin="0,0,0,5">
                <TextBox x:Name="IpInput" Width="120" Text="127.0.0.1" Margin="0,0,5,0"/>
                <TextBox x:Name="PortInput" Width="60" Text="5000" Margin="0,0,5,0"/>
                <TextBox x:Name="NameInput" Width="200" Text="Enter your name"/>
                <Button Content="Connect" Width="100" Margin="5,0,0,0" Click="ConnectButton_Click"/>
                <Button Content="Disconnect" Width="100" Margin="5,0,0,0" Click="DisconnectButton_Click"/>
            </StackPanel>

            <ListBox x:Name="ChatList" Grid.Row="1" />

            <TextBlock x:Name="TypingIndicator" Grid.Row="2" 
                       FontStyle="Italic" Foreground="Gray" Margin="0,5,0,5"/>

            <StackPanel Orientation="Horizontal" Grid.Row="3">
                <TextBox x:Name="MessageInput" Width="500" 
                         KeyDown="MessageInput_KeyDown"
                         GotFocus="MessageInput_GotFocus"
                         LostFocus="MessageInput_LostFocus"/>
                <Button Content="Send" Width="100" Margin="5,0,0,0" Click="SendButton_Click"/>
                <Button Content="Download History" Width="150" Margin="5,0,0,0" Click="DownloadButton_Click"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>
